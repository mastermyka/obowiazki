<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Domowe obowiÄ…zki â€” PRO 3 (rozszerzone)</title>

<meta name="theme-color" content="#0a84ff"/>
<link rel="manifest" href="manifest.webmanifest" />
<link rel="apple-touch-icon" href="icons/icon-192.png"/>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
<script src="https://cdn.tailwindcss.com"></script>

<script>window.process = window.process || { env: {} };</script>

<script src="https://www.gstatic.com/firebasejs/10.12.4/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.4/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.4/firebase-app-check-compat.js"></script>
<script src="firebase-config.js"></script>

<style>
:root{--bg:#0f1113;--card:rgba(28,28,30,.72);--border:rgba(255,255,255,.08);--muted:#8e8e93;--text:#f5f5f7;--accent:#0a84ff;--ok:#30d158;--warn:#ffd60a;--danger:#ff453a;--shadow:0 8px 30px rgba(0,0,0,.35)}
*{box-sizing:border-box}
body{margin:0;font-family:Inter,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,"Apple Color Emoji";color:var(--text);background:radial-gradient(1200px 800px at 20% -10%,#1b1d20 0%,#0f1113 60%)}
.wrap{max-width:1200px;margin:28px auto;padding:0 16px}
header{display:flex;gap:12px;align-items:center;justify-content:space-between;flex-wrap:wrap}
.title{font-weight:800;font-size:1.25rem;display:flex;gap:10px;align-items:center;letter-spacing:.2px}
.dot{width:10px;height:10px;border-radius:50%;background:var(--ok);box-shadow:0 0 14px var(--ok)}
.subtitle{opacity:.85;color:var(--muted)}
.card{background:var(--card);border:1px solid var(--border);backdrop-filter:saturate(140%) blur(10px);border-radius:16px;padding:14px;box-shadow:var(--shadow)}
.row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
button,.btn{border:1px solid var(--border);background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.02));color:var(--text);padding:10px 14px;border-radius:12px;cursor:pointer;transition:transform .06s ease, box-shadow .18s ease, border-color .18s}
button:hover,.btn:hover{box-shadow:0 14px 30px -12px rgba(10,132,255,.45);border-color:rgba(99,102,241,.35)}
button:active{transform:translateY(1px)}
input[type=text],input[type=number],input[type=time],input[type=date],input[type=password],select{width:100%;padding:10px 12px;border-radius:10px;border:1px solid var(--border);background:rgba(255,255,255,.04);color:var(--text);transition:border-color .2s, box-shadow .2s}
input[type=text]:focus, input[type=number]:focus, input[type=time]:focus, input[type=date]:focus, input[type=password]:focus, select:focus{border-color:#8da2fb;box-shadow:0 0 0 4px rgba(99,102,241,.18)}
.grid{display:grid;grid-template-columns:1.25fr .75fr;gap:12px}
@media(max-width:980px){.grid{grid-template-columns:1fr}}
.task{display:flex;align-items:flex-start;gap:10px;padding:10px;border-radius:12px;border:1px solid var(--border);background:rgba(255,255,255,.03)}
.task:hover{border-color:rgba(99,102,241,.35);box-shadow:0 10px 28px -14px rgba(10,132,255,.35)}
.task.done{opacity:.55}
.task label{flex:1}
.task small{opacity:.9;color:var(--muted)}
.task .actions{display:flex;gap:8px}
.progress{height:10px;background:rgba(255,255,255,.08);border-radius:999px;overflow:hidden}
.progress>div{height:100%;background:linear-gradient(90deg,var(--accent),#34d399);width:0%}
.shop-cat-strip{display:flex;gap:8px;overflow-x:auto;padding:6px 2px}
.shop-cat{padding:4px 10px;border-radius:999px;border:1px solid var(--border);background:rgba(255,255,255,.06);white-space:nowrap;cursor:pointer}
.shop-cat.active{background:var(--accent);color:white}
.child-disabled{opacity:.5;cursor:not-allowed !important}
:root.light{--bg:#eef2ff;--card:#EDEDED;--border:#242F51;--muted:#5b6477;--text:#0f172a;--accent:#0a84ff;--ok:#34c759;--warn:#ffd60a;--danger:#ff3b30;--shadow:0 12px 28px rgba(2,6,23,.14)}
:root.light body{color:var(--text);background:radial-gradient(1400px 900px at 20% -10%,#eef2ff 0%,#f8fafc 60%)}
</style>
</head>

<body>
<div id="splash"><div class="logo">ğŸ§¹</div></div>

<div class="wrap">
<header>
  <div class="title"><span class="dot"></span> Domowy organizer â€” PRO 3</div>
  <div>
    <div class="subtitle" id="today"></div>
    <div class="subtitle">Rodzina: <strong id="familyLabel">â€”</strong></div>
  </div>
  <div class="row">
    <div class="top-tabs">
      <button id="tabChores" class="tab active">ğŸ§º ObowiÄ…zki</button>
      <button id="tabShopping" class="tab">ğŸ›’ Zakupy</button>
      <button id="tabExpenses" class="tab">ğŸ§® Wydatki</button>
    </div>
    <button id="themeToggle" class="btn" title="Jasny / ciemny">â˜€ï¸ / ğŸŒ™</button>
  </div>
</header>
<!-- VIEW: OBOWIÄ„ZKI -->
<div id="view-chores">

<section class="card">
  <h3>Dodaj obowiÄ…zek</h3>
  <div class="row" style="flex-direction:column;gap:10px">
    <input id="taskName" type="text" placeholder="Nazwa obowiÄ…zku">
    <div class="row">
      <button class="btn" onclick="showAddTaskPopup()">Dodaj obowiÄ…zek â•</button>
    </div>
  </div>
</section>

<div style="height:10px"></div>

<section class="card">
  <h3>Twoje obowiÄ…zki</h3>
  <div id="tasksList"></div>
</section>

</div>

<!-- POPUP DODAWANIA OBOWIÄ„ZKU -->
<div id="addTaskPopup" class="popup">
  <div class="popup-content card">
    <h3>Nowy obowiÄ…zek</h3>

    <input type="text" id="popupTaskName" placeholder="Nazwa">

    <select id="popupTaskPerson"></select>
    <select id="popupTaskDay">
      <option value="daily">Codziennie</option>
      <option value="weekly">Raz w tygodniu</option>
      <option value="monthly">Raz w miesiÄ…cu</option>
    </select>

    <div class="row">
      <button class="btn" onclick="confirmAddTask()">Dodaj</button>
      <button class="btn" onclick="closeAddTaskPopup()">Anuluj</button>
    </div>
  </div>
</div>
<!-- VIEW: ZAKUPY -->
<div id="view-shopping" style="display:none">

<section class="card">
  <h3>Dodaj produkt do kupienia</h3>

  <div class="row" style="flex-direction:column;gap:10px">
    <input id="shoppingName" type="text" placeholder="Nazwa produktu">

    <select id="shoppingCategory"></select>

    <div class="row">
      <button id="addShoppingBtn" class="btn">Dodaj â•</button>
    </div>
  </div>
</section>

<div style="height:10px"></div>

<section class="card">
  <h3>Kategorie produktÃ³w</h3>

  <div class="row" style="margin-bottom:8px">
    <input id="newShopCat" type="text" placeholder="Nowa kategoria" style="flex:1">
    <button id="addShopCatBtn" class="btn">â•</button>
    <button id="delShopCatBtn" class="btn">ğŸ—‘ï¸</button>
  </div>

  <div id="shopCategories" class="shop-cat-strip"></div>
</section>

<div style="height:10px"></div>

<section class="card">
  <h3>Do kupienia</h3>
  <div id="shoppingList"></div>
</section>

<div style="height:10px"></div>

<section class="card">
  <h3>Kupione</h3>
  <div id="shoppingBoughtList"></div>
</section>

</div>
<!-- VIEW: WYDATKI -->
<div id="view-expenses" style="display:none">

<section class="card">
  <h3>Dodaj wydatek</h3>

  <div class="row" style="flex-direction:column;gap:10px">
    <input id="expenseAmount" type="number" min="0" step="0.01" placeholder="Kwota (np. 12.50)">
    
    <select id="expenseCategory"></select>

    <select id="expensePerson"></select>

    <div class="row">
      <button id="addExpenseBtn" class="btn">Dodaj â•</button>
    </div>
  </div>
</section>

<div style="height:10px"></div>

<section class="card">
  <h3>Kategorie wydatkÃ³w</h3>

  <div class="row" style="margin-bottom:8px">
    <input id="newExpenseCat" type="text" placeholder="Nowa kategoria" style="flex:1">
    <button id="addExpenseCatBtn" class="btn">â•</button>
    <button id="delExpenseCatBtn" class="btn">ğŸ—‘ï¸</button>
  </div>

  <div id="expenseCategories" class="shop-cat-strip"></div>
</section>

<div style="height:10px"></div>

<section class="card">
  <h3>Podsumowanie miesiÄ…ca</h3>

  <div class="row" style="flex-direction:column;gap:6px">
    <div><strong>ÅÄ…cznie:</strong> <span id="expenseTotal">0.00</span> zÅ‚</div>
    <ul id="expenseCategoryTotals" style="margin:0;padding-left:18px"></ul>
  </div>
</section>

<div style="height:10px"></div>

<section class="card">
  <h3>Lista wydatkÃ³w</h3>
  <div id="expenseList"></div>
</section>

</div>
/* ===== ZAKUPY â€” DANE ===== */

if (!db.shoppingCategories) {
  db.shoppingCategories = ["Jedzenie", "Chemia", "Kosmetyki"];
}
if (!db.shopping) db.shopping = [];


/* ===== ZAKUPY â€” RENDER KATEGORII ===== */

function renderShoppingCategories() {
  const strip = document.getElementById("shopCategories");
  strip.innerHTML = "";

  db.shoppingCategories.forEach(cat=>{
    const b = document.createElement("button");
    b.className = "btn";
    b.textContent = cat;
    b.onclick = ()=>{ currentShoppingFilter = cat; renderShoppingLists(); };
    strip.appendChild(b);
  });

  const sel = document.getElementById("shoppingCategory");
  sel.innerHTML = db.shoppingCategories.map(c=>`<option>${c}</option>`).join("");
}


/* ===== ZAKUPY â€” DODAWANIE / USUWANIE KATEGORII ===== */

document.getElementById("addShopCatBtn").onclick = ()=>{
  const v = document.getElementById("newShopCat").value.trim();
  if (!v) return;
  if (!db.shoppingCategories.includes(v)) db.shoppingCategories.push(v);
  document.getElementById("newShopCat").value = "";
  save();
  renderShoppingCategories();
};

document.getElementById("delShopCatBtn").onclick = ()=>{
  const v = document.getElementById("newShopCat").value.trim();
  if (!v) return;
  if (!confirm("UsunÄ…Ä‡ kategoriÄ™: "+v+" ?")) return;
  db.shoppingCategories = db.shoppingCategories.filter(x=>x!==v);
  db.shopping = db.shopping.map(s=> s.category===v ? {...s, category:"Inne"} : s);
  save();
  renderShoppingCategories();
};


/* ===== ZAKUPY â€” DODAWANIE POZYCJI ===== */

document.getElementById("addShoppingBtn").onclick = ()=>{
  const name = document.getElementById("shoppingName").value.trim();
  const cat  = document.getElementById("shoppingCategory").value;

  if (!name) return alert("Podaj nazwÄ™ produktu");

  db.shopping.push({
    id: crypto.randomUUID(),
    name,
    category: cat,
    done: false,
    created: Date.now()
  });

  document.getElementById("shoppingName").value = "";
  save();
  renderShoppingLists();
};


/* ===== ZAKUPY â€” LISTA ===== */

let currentShoppingFilter = null;

function renderShoppingLists() {

  const list    = document.getElementById("shoppingList");
  const bought  = document.getElementById("shoppingBoughtList");

  const items = db.shopping.slice().sort((a,b)=>a.created-b.created);

  const toBuy   = items.filter(x=>!x.done);
  const isBought= items.filter(x=> x.done);

  const filter = currentShoppingFilter;

  list.innerHTML = "";
  bought.innerHTML = "";

  function renderItem(holder, item){
    const row = document.createElement("div");
    row.className = "shopItem";
    row.innerHTML = `
      <div>
        <strong>${item.name}</strong>
        <div class="muted">${item.category}</div>
      </div>
    `;

    const right = document.createElement("div");
    right.style.display = "flex";
    right.style.gap = "6px";

    const cb = document.createElement("input");
    cb.type = "checkbox";
    cb.checked = item.done;
    cb.onchange = ()=>{
      item.done = cb.checked;
      save();
      renderShoppingLists();
    };

    const del = document.createElement("button");
    del.className = "btn";
    del.textContent = "ğŸ—‘ï¸";
    del.onclick = ()=>{
      if (!confirm("UsunÄ…Ä‡ pozycjÄ™?")) return;
      db.shopping = db.shopping.filter(s=>s.id!==item.id);
      save();
      renderShoppingLists();
    };

    right.appendChild(cb);
    right.appendChild(del);

    row.appendChild(right);
    holder.appendChild(row);
  }

  toBuy
    .filter(i => !filter || i.category === filter)
    .forEach(i => renderItem(list, i));

  isBought
    .filter(i => !filter || i.category === filter)
    .forEach(i => renderItem(bought, i));
}
/* ===== WYDATKI â€” DANE STARTOWE ===== */

if (!db.expenseCategories) {
  db.expenseCategories = ["Rachunki", "Zakupy", "Transport"];
}

if (!db.expenses) db.expenses = [];


/* ===== WYDATKI â€” RENDER KATEGORII ===== */

function renderExpenseCategories() {

  const strip = document.getElementById("expenseCategories");
  strip.innerHTML = "";

  db.expenseCategories.forEach(cat=>{
    const b = document.createElement("button");
    b.className = "btn";
    b.textContent = cat;
    b.onclick = ()=>{ currentExpenseFilter = cat; renderExpenses(); };
    strip.appendChild(b);
  });

  const sel = document.getElementById("expenseCategory");
  sel.innerHTML = db.expenseCategories.map(c=>`<option>${c}</option>`).join("");
}


/* ===== WYDATKI â€” LISTA OSÃ“B ===== */

function renderExpensePeople() {
  const sel = document.getElementById("expensePerson");
  sel.innerHTML = db.people.map(p=>`<option>${p.name}</option>`).join("");
}


/* ===== WYDATKI â€” DODAWANIE / USUWANIE KATEGORII ===== */

document.getElementById("addExpenseCatBtn").onclick = ()=>{
  const v = document.getElementById("newExpenseCat").value.trim();
  if (!v) return;
  if (!db.expenseCategories.includes(v)) db.expenseCategories.push(v);
  document.getElementById("newExpenseCat").value = "";
  save();
  renderExpenseCategories();
};

document.getElementById("delExpenseCatBtn").onclick = ()=>{
  const v = document.getElementById("newExpenseCat").value.trim();
  if (!v) return;
  if (!confirm("UsunÄ…Ä‡ kategoriÄ™: " + v + " ?")) return;

  db.expenseCategories = db.expenseCategories.filter(x=>x!==v);
  db.expenses = db.expenses.map(e => e.category === v ? {...e, category:"Inne"} : e);

  save();
  renderExpenseCategories();
  renderExpenses();
};


/* ===== WYDATKI â€” DODAWANIE WYDATKU ===== */

document.getElementById("addExpenseBtn").onclick = ()=>{
  const amount = parseFloat(document.getElementById("expenseAmount").value);
  const cat     = document.getElementById("expenseCategory").value;
  const person  = document.getElementById("expensePerson").value;

  if (isNaN(amount) || amount <= 0) return alert("Podaj poprawnÄ… kwotÄ™");

  db.expenses.push({
    id: crypto.randomUUID(),
    amount,
    category: cat,
    person,
    ts: Date.now()
  });

  document.getElementById("expenseAmount").value = "";

  save();
  renderExpenses();
};


/* ===== WYDATKI â€” FILTROWANIE ===== */
let currentExpenseFilter = null;


/* ===== WYDATKI â€” PODSUMOWANIE + LISTA ===== */

function renderExpenses() {

  const list = document.getElementById("expenseList");
  const totalsList = document.getElementById("expenseCategoryTotals");
  const totalEl = document.getElementById("expenseTotal");

  list.innerHTML = "";
  totalsList.innerHTML = "";

  const now = new Date();
  const ym = now.getFullYear() + "-" + String(now.getMonth()+1).padStart(2,"0");

  // filtr â€” tylko bieÅ¼Ä…cy miesiÄ…c
  const monthExp = db.expenses.filter(e=>{
    const d = new Date(e.ts);
    const ym2 = d.getFullYear() + "-" + String(d.getMonth()+1).padStart(2,"0");
    return ym2 === ym;
  });

  // filtr kategorii
  const filtered = currentExpenseFilter
    ? monthExp.filter(e=>e.category===currentExpenseFilter)
    : monthExp;

  /* ===== SUMA GÅÃ“WNA ===== */

  const sum = monthExp.reduce((a,b)=>a+b.amount, 0);
  totalEl.textContent = sum.toFixed(2);


  /* ===== SUMY PER KATEGORIA ===== */

  const agg = {};
  monthExp.forEach(e=>{
    agg[e.category] = (agg[e.category] || 0) + e.amount;
  });

  Object.entries(agg).forEach(([cat,val])=>{
    const li = document.createElement("li");
    li.textContent = `${cat}: ${val.toFixed(2)} zÅ‚`;
    totalsList.appendChild(li);
  });


  /* ===== LISTA WYDATKÃ“W ===== */

  filtered
    .sort((a,b)=>b.ts - a.ts)
    .forEach(e=>{
      const row = document.createElement("div");
      row.className = "shopItem";

      const d = new Date(e.ts);
      const h = d.toLocaleString("pl-PL");

      row.innerHTML = `
        <div>
          <strong>${e.amount.toFixed(2)} zÅ‚</strong>
          <div class="muted">${e.category} â€¢ ${e.person} â€¢ ${h}</div>
        </div>
      `;

      const del = document.createElement("button");
      del.className = "btn";
      del.textContent = "ğŸ—‘ï¸";
      del.onclick = ()=>{
        if(!confirm("UsunÄ…Ä‡ wydatek?")) return;
        db.expenses = db.expenses.filter(x=>x.id!==e.id);
        save();
        renderExpenses();
      };

      row.appendChild(del);
      list.appendChild(row);
    });
}
/* ============================================================
   ZAKÅADKI: OBOWIÄ„ZKI / ZAKUPY / WYDATKI
   ============================================================ */

function initTabs() {
  const tabChores    = document.getElementById("tabChores");
  const tabShopping  = document.getElementById("tabShopping");

  /* Dodajemy NOWÄ„ zakÅ‚adkÄ™ WYDATKI obok pozostaÅ‚ych */
  let tabExpenses = document.getElementById("tabExpenses");
  if (!tabExpenses) {
    tabExpenses = document.createElement("button");
    tabExpenses.id = "tabExpenses";
    tabExpenses.className = "tab";
    tabExpenses.textContent = "ğŸ’° Wydatki";
    document.querySelector(".top-tabs").appendChild(tabExpenses);
  }

  const viewChores   = document.getElementById("view-chores");
  const viewShopping = document.getElementById("view-shopping");
  const viewExpenses = document.getElementById("view-expenses");

  function activate(which) {

    /* domyÅ›lnie wszystko chowamy */
    viewChores.style.display   = "none";
    viewShopping.style.display = "none";
    viewExpenses.style.display = "none";

    tabChores.classList.remove("active");
    tabShopping.classList.remove("active");
    tabExpenses.classList.remove("active");

    /* pokazywanie wybranego widoku */
    if (which === "chores") {
      tabChores.classList.add("active");
      viewChores.style.display = "";
      renderAllCore();
    }

    if (which === "shopping") {
      tabShopping.classList.add("active");
      viewShopping.style.display = "";
      renderShoppingCategories();
      renderShoppingLists();
    }

    if (which === "expenses") {
      tabExpenses.classList.add("active");
      viewExpenses.style.display = "";
      renderExpenseCategories();
      renderExpensePeople();
      renderExpenses();
    }
  }

  tabChores.onclick   = ()=>activate("chores");
  tabShopping.onclick = ()=>activate("shopping");
  tabExpenses.onclick = ()=>activate("expenses");
}

initTabs();



/* ============================================================
   TRYB DZIECKA â€” BLOCKADA FUNKCJI
   ============================================================ */

const childBlockedButtons = [
  "addPersonBtn",
  "renamePersonBtn",
  "setGoalBtn",
  "setIcsBtn",
  "removePersonBtn",
  "addTaskBtn",
  "addZoneBtn",
  "delZoneBtn",
  "randomZoneBtn",
  "exportBtn",
  "importBtn",
  "exportCSVPersonBtn",
  "exportCSVAllBtn",
  "resetDailyBtn",
  "clearDoneBtn"
];

function applyChildModeLock() {
  const p = currentPerson();
  if (!p) return;

  const isChild = p.childMode === true;

  /* blokujemy tylko obowiÄ…zki + ustawienia */
  childBlockedButtons.forEach(id=>{
    const b = document.getElementById(id);
    if (!b) return;
    b.disabled = isChild;
    if (isChild) b.style.opacity = "0.4";
    else b.style.opacity = "1";
  });

  /* w zadaniach blokada edycji + usuwania */
  const rows = document.querySelectorAll("#tasksList .task");
  rows.forEach(r=>{
    const btns = r.querySelectorAll("button");
    btns.forEach(b => {
      if (b.textContent !== "âœï¸" &&
          b.textContent !== "ğŸ™ˆ" &&
          b.textContent !== "ğŸ“†" &&
          b.textContent !== "ğŸ—‘ï¸") return;

      if (isChild) {
        b.disabled = true;
        b.style.opacity = "0.3";
      } else {
        b.disabled = false;
        b.style.opacity = "1";
      }
    });
  });

  /* w sklepiku nagrÃ³d dziecko MOÅ»E kupowaÄ‡, wiÄ™c nic nie blokujemy */

  /* w zakupach dziecko moÅ¼e tylko odhaczaÄ‡ kupione / kupowaÄ‡ */
  const shopButtonsBlock = [
    "addShoppingBtn",
    "addShopCatBtn",
    "delShopCatBtn"
  ];
<style>
/* ===== WYGLÄ„D LIST W ZAKUPACH I WYDATKACH ===== */

.shopItem {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px;
  border-radius: 12px;
  border: 1px solid var(--border);
  background: rgba(255,255,255,.03);
  margin-bottom: 8px;
}

.shopItem:hover {
  border-color: rgba(99,102,241,.35);
  box-shadow: 0 10px 28px -14px rgba(10,132,255,.35);
}

.muted {
  opacity: .7;
  font-size: .85rem;
}

/* Popup (obowiÄ…zki â€“ dodawanie zadania) */
.popup {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(0,0,0,.45);
  backdrop-filter: blur(2px);
  display: none;
  align-items: center;
  justify-content: center;
}

.popup-content {
  width: 90%;
  max-width: 400px;
}

/* ZakÅ‚adki */
.top-tabs {
  display: flex;
  gap: 6px;
}

.tab {
  padding: 8px 12px;
  border-radius: 12px;
  background: rgba(255,255,255,.06);
  border: 1px solid var(--border);
  cursor: pointer;
}

.tab.active {
  background: var(--accent);
  color: white;
}

/* Ulepszenie stylu selectÃ³w */
select {
  cursor: pointer;
}
</style>


<script>
/* FINALNE ODPALENIE APLIKACJI */

document.addEventListener("DOMContentLoaded", ()=>{
  renderShoppingCategories();
  renderShoppingLists();

  renderExpenseCategories();
  renderExpensePeople();
  renderExpenses();

  applyChildModeLock();
});
</script>

</div> <!-- .wrap -->

</body>
</html>

  shopButtonsBlock.forEach(id=>{
    const b = document.getElementById(id);
    if (!b) return;
    b.disabled = isChild;
    b.style.opacity = isChild ? "0.4" : "1";
  });

  /* w wydatkach dziecko nie moÅ¼e nic dodawaÄ‡ */
  const expButtons = [
    "addExpenseBtn",
    "addExpenseCatBtn",
    "delExpenseCatBtn"
  ];

  expButtons.forEach(id=>{
    const b = document.getElementById(id);
    if (!b) return;
    b.disabled = isChild;
    b.style.opacity = isChild ? "0.4" : "1";
  });
}

/* odpalamy blokady po kaÅ¼dym renderze */
const oldRenderAllCore = renderAllCore;
renderAllCore = function() {
  oldRenderAllCore();
  applyChildModeLock();
};
<style>
/* ===== WYGLÄ„D LIST W ZAKUPACH I WYDATKACH ===== */

.shopItem {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px;
  border-radius: 12px;
  border: 1px solid var(--border);
  background: rgba(255,255,255,.03);
  margin-bottom: 8px;
}

.shopItem:hover {
  border-color: rgba(99,102,241,.35);
  box-shadow: 0 10px 28px -14px rgba(10,132,255,.35);
}

.muted {
  opacity: .7;
  font-size: .85rem;
}

/* Popup (obowiÄ…zki â€“ dodawanie zadania) */
.popup {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(0,0,0,.45);
  backdrop-filter: blur(2px);
  display: none;
  align-items: center;
  justify-content: center;
}

.popup-content {
  width: 90%;
  max-width: 400px;
}

/* ZakÅ‚adki */
.top-tabs {
  display: flex;
  gap: 6px;
}

.tab {
  padding: 8px 12px;
  border-radius: 12px;
  background: rgba(255,255,255,.06);
  border: 1px solid var(--border);
  cursor: pointer;
}

.tab.active {
  background: var(--accent);
  color: white;
}

/* Ulepszenie stylu selectÃ³w */
select {
  cursor: pointer;
}
</style>


<script>
/* FINALNE ODPALENIE APLIKACJI */

document.addEventListener("DOMContentLoaded", ()=>{
  renderShoppingCategories();
  renderShoppingLists();

  renderExpenseCategories();
  renderExpensePeople();
  renderExpenses();

  applyChildModeLock();
});
</script>

</div> <!-- .wrap -->

</body>
</html>
